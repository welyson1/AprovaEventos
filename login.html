<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprova Eventos - Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        govbr: {
                            primary: '#1351B4',
                            secondary: '#0C326F',
                            accent: '#2670E8',
                            success: '#168821',
                            warning: '#FFCD07',
                            danger: '#E52207'
                        }
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid white;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-slow {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 flex flex-col">
    
    <!-- Header -->
    <header class="w-full py-4 px-6 bg-white/80 backdrop-blur-sm border-b border-slate-200">
        <div class="max-w-6xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-govbr-primary rounded-lg flex items-center justify-center">
                    <i data-lucide="building-2" class="w-6 h-6 text-white"></i>
                </div>
                <div>
                    <h1 class="text-lg font-bold text-govbr-secondary">Aprova Eventos</h1>
                    <p class="text-xs text-slate-500">Prefeitura de Londrina</p>
                </div>
            </div>
            <div class="hidden sm:flex items-center gap-2 text-sm text-slate-600">
                <i data-lucide="shield-check" class="w-4 h-4 text-govbr-success"></i>
                <span>Ambiente Seguro</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 flex items-center justify-center p-6">
        <div class="w-full max-w-md fade-in">
            
            <!-- Card Principal -->
            <div class="bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden">
                
                <!-- Hero Section -->
                <div class="bg-gradient-to-r from-govbr-primary to-govbr-accent p-8 text-center text-white">
                    <div class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm">
                        <i data-lucide="calendar-check" class="w-10 h-10"></i>
                    </div>
                    <h2 class="text-2xl font-bold mb-2">Alvará em 20 dias</h2>
                    <p class="text-blue-100 text-sm">Lei de Liberdade Econômica + Inteligência Geoespacial</p>
                </div>

                <!-- Features -->
                <div class="p-6 space-y-4">
                    <div class="flex items-start gap-3 p-3 bg-slate-50 rounded-xl">
                        <div class="w-8 h-8 bg-govbr-success/10 rounded-lg flex items-center justify-center flex-shrink-0">
                            <i data-lucide="zap" class="w-4 h-4 text-govbr-success"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-slate-800 text-sm">Aprovação Automática</h3>
                            <p class="text-xs text-slate-500">Eventos de baixo risco aprovados instantaneamente</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start gap-3 p-3 bg-slate-50 rounded-xl">
                        <div class="w-8 h-8 bg-govbr-accent/10 rounded-lg flex items-center justify-center flex-shrink-0">
                            <i data-lucide="map" class="w-4 h-4 text-govbr-accent"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-slate-800 text-sm">Mapa Inteligente</h3>
                            <p class="text-xs text-slate-500">Zoneamento automático por geolocalização</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start gap-3 p-3 bg-slate-50 rounded-xl">
                        <div class="w-8 h-8 bg-purple-500/10 rounded-lg flex items-center justify-center flex-shrink-0">
                            <i data-lucide="file-check-2" class="w-4 h-4 text-purple-500"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-slate-800 text-sm">Autodeclaração Digital</h3>
                            <p class="text-xs text-slate-500">Sem burocracia, com valor jurídico</p>
                        </div>
                    </div>
                </div>

                <!-- Login Button -->
                <div class="px-6 pb-6">
                    <button 
                        id="btnLogin"
                        onclick="handleLogin()"
                        class="w-full bg-govbr-secondary hover:bg-govbr-primary transition-all duration-300 text-white font-semibold py-4 px-6 rounded-xl flex items-center justify-center gap-3 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
                    >
                        <span id="btnContent" class="flex items-center gap-3">
                            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                            </svg>
                            Entrar com Gov.br
                        </span>
                        <span id="btnLoading" class="hidden items-center gap-3">
                            <div class="spinner"></div>
                            Autenticando...
                        </span>
                    </button>
                    
                    <p class="text-center text-xs text-slate-400 mt-4">
                        Ao continuar, você concorda com os <a href="#" class="text-govbr-accent hover:underline">Termos de Uso</a>
                    </p>
                </div>
            </div>

            <!-- Stats -->
            <div class="grid grid-cols-3 gap-4 mt-6">
                <div class="bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-slate-200">
                    <p class="text-2xl font-bold text-govbr-primary">60s</p>
                    <p class="text-xs text-slate-500">Tempo médio</p>
                </div>
                <div class="bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-slate-200">
                    <p class="text-2xl font-bold text-govbr-success">98%</p>
                    <p class="text-xs text-slate-500">Aprovação</p>
                </div>
                <div class="bg-white/60 backdrop-blur-sm rounded-xl p-4 text-center border border-slate-200">
                    <p class="text-2xl font-bold text-govbr-accent">1.2k</p>
                    <p class="text-xs text-slate-500">Eventos/mês</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer com Parceiros -->
    <footer class="w-full py-6 px-6 bg-white border-t border-slate-200">
        <div class="max-w-4xl mx-auto">
            <p class="text-center text-xs text-slate-400 mb-4">Realização e Parceiros</p>
            <div class="flex flex-wrap items-center justify-center gap-8 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all duration-500">
                <!-- Logos Parceiros (Placeholders estilizados) -->
                <div class="flex items-center gap-2 text-slate-600">
                    <i data-lucide="landmark" class="w-6 h-6"></i>
                    <span class="text-sm font-medium">Prefeitura Londrina</span>
                </div>
                <div class="flex items-center gap-2 text-slate-600">
                    <i data-lucide="briefcase" class="w-6 h-6"></i>
                    <span class="text-sm font-medium">Sebrae PR</span>
                </div>
                <div class="flex items-center gap-2 text-slate-600">
                    <i data-lucide="graduation-cap" class="w-6 h-6"></i>
                    <span class="text-sm font-medium">UEL</span>
                </div>
                <div class="flex items-center gap-2 text-slate-600">
                    <i data-lucide="cpu" class="w-6 h-6"></i>
                    <span class="text-sm font-medium">SmartCities</span>
                </div>
            </div>
            <p class="text-center text-xs text-slate-400 mt-4">
                SmartCities Hackathon Londrina 2025 • Governança e Planejamento Urbano
            </p>
        </div>
    </footer>

    <script>
        // Inicializar Lucide Icons
        lucide.createIcons();

        // Mock Database inicial
        const initMockDB = () => {
            const mockDB = {
                user: null,
                currentEvent: null,
                events: [
                    {
                        id: 1,
                        nome: "Festival Gastronômico do Lago",
                        local: "Lago Igapó - Londrina",
                        lat: -23.3245,
                        lng: -51.1869,
                        zona: "publica",
                        data: "2025-12-15",
                        publico: "200-500",
                        estrutura: true,
                        musica: true,
                        status: "aprovado",
                        progresso: 100,
                        documentos: [],
                        imagem: "https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400"
                    },
                    {
                        id: 2,
                        nome: "Feira de Artesanato",
                        local: "Calçadão - Centro",
                        lat: -23.3103,
                        lng: -51.1628,
                        zona: "publica",
                        data: "2025-12-20",
                        publico: "<200",
                        estrutura: false,
                        musica: false,
                        status: "aprovado",
                        progresso: 100,
                        documentos: [],
                        imagem: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400"
                    },
                    {
                        id: 3,
                        nome: "Show Sertanejo",
                        local: "Espaço Eventos Private",
                        lat: -23.2890,
                        lng: -51.1450,
                        zona: "privada",
                        data: "2025-12-22",
                        publico: ">500",
                        estrutura: true,
                        musica: true,
                        status: "em_analise",
                        progresso: 65,
                        documentos: [],
                        imagem: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400"
                    }
                ]
            };
            
            if (!localStorage.getItem('aprovaEventos_db')) {
                localStorage.setItem('aprovaEventos_db', JSON.stringify(mockDB));
            }
        };

        initMockDB();

        // Função de Login
        function handleLogin() {
            const btnContent = document.getElementById('btnContent');
            const btnLoading = document.getElementById('btnLoading');
            const btnLogin = document.getElementById('btnLogin');
            
            // Mostrar loading
            btnContent.classList.add('hidden');
            btnLoading.classList.remove('hidden');
            btnLoading.classList.add('flex');
            btnLogin.disabled = true;
            btnLogin.classList.add('opacity-80', 'cursor-not-allowed');
            
            // Simular autenticação OAuth
            setTimeout(() => {
                // Salvar usuário no mockDB
                const db = JSON.parse(localStorage.getItem('aprovaEventos_db'));
                db.user = {
                    nome: "João Silva",
                    cpf: "***.***.***-00",
                    email: "joao.silva@email.com",
                    avatar: "JS"
                };
                localStorage.setItem('aprovaEventos_db', JSON.stringify(db));
                    // If there is a pending draft saved before login, restore it as currentEvent and redirect to gestão
                    const pending = localStorage.getItem('pendingDraft');
                    if (pending) {
                        try {
                            const draft = JSON.parse(pending);
                            const newEvent = {
                                id: Date.now(),
                                ...draft,
                                criadoEm: new Date().toISOString()
                            };
                            db.currentEvent = newEvent;
                            db.events.push(newEvent);
                            localStorage.setItem('aprovaEventos_db', JSON.stringify(db));
                            localStorage.removeItem('pendingDraft');
                            window.location.href = 'gestao-processo.html';
                            return;
                        } catch (e) {
                            console.error('Erro ao restaurar rascunho', e);
                        }
                    }

                    // Redirecionar para nova solicitação por padrão
                    window.location.href = 'nova-solicitacao.html';
            }, 2000);
        }
    </script>
</body>
</html>
